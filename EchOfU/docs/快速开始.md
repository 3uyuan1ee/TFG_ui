# 快速开始与常见问题



<img src="../resource/index.png" alt="Web Interface Preview"/>


---

## 快速开始

### 环境要求

| 组件 | 最低要求 | 推荐配置 |
|------|----------|----------|
| **Python** | 3.10 | 3.10 |
| **GPU** | NVIDIA GPU (>=8GB) | NVIDIA RTX 4090 (24GB) |
| **内存** | 16GB | 32GB+ |
| **存储** | 50GB SSD | 100GB NVMe SSD |
| **操作系统** | Linux/Windows/macOS* | Ubuntu 18.04 / Windows 11 |

**注意**: ER-NeRF **不支持 macOS**，Windows 支持有限（仅通过 WSL2）。

### 安装步骤

#### 1. 克隆项目

```bash
git clone https://github.com/3uyuan1ee/TFG_ui.git
cd TFG_ui
```

#### 2. 初始化子模块

```bash
# 方式1: 完整克隆（推荐）
git submodule update --init --recursive

# 方式2: 浅克隆（更快，但功能受限）
git submodule update --init --recursive --depth=1
```

#### 3. 创建虚拟环境

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Linux/macOS:
source venv/bin/activate

# Windows:
venv\Scripts\activate
```

#### 4. 安装依赖

```bash
cd EchOfU

# 标准安装
pip install -r requirements.txt

# 国内用户加速（阿里云镜像）
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host=mirrors.aliyun.com
```

#### 5. 启动服务

```bash
python app.py
```

服务启动后，访问: **http://localhost:5001**

### 首次使用

#### 模型下载

项目会在首次运行时自动下载 CosyVoice3 模型（约 3GB）：

- 模型名称: `Fun-CosyVoice3-0.5B-2512`
- 下载位置: `EchOfU/CosyVoice/pretrained_models/`
- 下载时间: 取决于网络速度（5-30分钟）

**手动下载**（可选）:

```python
from modelscope import snapshot_download

# 下载 CosyVoice3 模型
snapshot_download('FunAudioLLM/Fun-CosyVoice3-0.5B-2512',
                   cache_dir='EchOfU/CosyVoice/pretrained_models')
```


---

## 帮助

### 相关文档

- [完整配置文档](配置文档.md) - CosyVoice 和 ER-NeRF 详细配置
- [ER-NeRF 部署指南](docker/ERNERF_DEPLOYMENT.md) - Docker 部署步骤
- [Docker 使用说明](docker/ERNERF_DOCKER.md) - Docker 命令参考

### 社区支持

- **CosyVoice**: https://github.com/FunAudioLLM/CosyVoice
- **ER-NeRF**: https://github.com/Fictionarry/ER-NeRF

---

## 附录

### A. 目录结构

```
EchOfU/
├── app.py                      # Flask 应用入口
├── requirements.txt            # 项目依赖
├── README.md                   # 项目说明
├── backend/                    # 后端模块
│   ├── CV_clone.py            # CosyVoice 服务
│   ├── video_generator.py     # 视频生成
│   ├── model_trainer.py       # 模型训练
│   └── chat_engine.py         # 对话引擎
├── static/                     # 静态资源
│   ├── voices/                # 音频文件
│   ├── videos/                # 视频文件
│   └── history/               # 历史记录
├── CosyVoice/                 # CosyVoice 子模块
├── ER-NeRF/                   # ER-NeRF 子模块
└── docs/                      # 文档目录
```

### B. 环境变量

```bash
# ER-NeRF 调用模式
export USE_DOCKER_FOR_ERNERF=true  # 使用 Docker（推荐）
export USE_DOCKER_FOR_ERNERF=false # 直接调用

# Flask 配置
export FLASK_ENV=development
export FLASK_DEBUG=1
export FLASK_PORT=5001
```
